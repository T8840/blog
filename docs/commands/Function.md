---
title: 函数
author: T8840
date: '2023-01-15'
---


## 聚合函数

MySQL中有5种聚合函数较为常用，分别是求和函数SUM()、求平均函数AVG()、最大值函数MAX()、最小值函数MIN()和计数函数COUNT()。

这些函数，为我们对数据库中的数据进行统计和计算提供了方便。因为计算直接在数据库中执行，比在应用层面完成相同的工作，效率高很多。

## 时间函数

- 获取日期时间数据中部分信息的函数  
   EXTRACT（type FROM date）表示从日期时间数据“date”中抽取“type”指定的部分

- 特定时间函数  
    YEAR（date）：获取date中的年。
    MONTH（date）：获取date中的月。
    DAY（date）：获取date中的日。
    HOUR（date）：获取date中的小时。
    MINUTE（date）：获取date中的分。
    SECOND（date）：获取date中的秒。
- 计算日期时间的函数  
    DATE_ADD（date, INTERVAL 表达式 type）：表示计算从时间点“date”开始，向前或者向后一段时间间隔的时间。“表达式”的值为时间间隔数，正数表示向后，负数表示向前，“type”表示时间间隔的单位（比如年、月、日等）。  
    LAST_DAY（date）：表示获取日期时间“date”所在月份的最后一天的日期。


- 其他日期时间函数
    - CURDATE() 获取当前的日期。日期格式为“YYYY-MM-DD”，也就是年月日的格
式。  
    - DAYOFWEEK() 获取日期“date”是周几。1表示周日，2表示周一，以此类推，直到7表示周六。  
- DATE_FORMAT
    ```sql
    -- 指定格式“%T”
     SELECT DATE_FORMAT("2020-12-01 13:25:50","%T");
    -- 指定格式“%r”
    SELECT DATE_FORMAT("2020-12-01 13:25:50","%r");
    ```
    - DATEDIFF()
        DATEDIFF（date1,date2），表示日期“date1”与日期“date2”之间差几天
## 条件判断函数

### 条件判断函数CASE
MySQL中CASE函数的语法如下：
```sql
CASE 表达式 WHEN 值1 THEN 表达式1 [ WHEN 值2 THEN 表达式2] ELSE 表达式m END
```

### 条件判断函数IF

条件判断函数的主要作用，就是根据特定的条件返回不同的值，常用的有两种：
```sql
IFNULL（V1，V2）：表示如果V1的值不为空值，则返回V1，否则返回V2。
IF（表达式，V1，V2）：如果表达式为真（TRUE），则返回V1，否则返回V2
```


## 数学函数

## 存储函数

创建存储函数的语法是：
```sql
CREATE FUNCTION 函数名称 （参数）RETURNS 数据类型 程序体

```
存储函数与存储过程很像，但有几个不同点：
1. 存储函数必须返回一个值或者数据表，存储过程可以不返回。
2. 存储过程可以通过CALL语句调用，存储函数不可以。
3. 存储函数可以放在查询语句中使用，存储过程不行。
4. 存储过程的功能更加强大，包括能够执行对表的操作（比如创建表，删除表等）和事务操作，这些功能是存储函数不具备的。
