---
title: 锁
author: T8840
date: '2023-01-15'
---


## 锁机制
InnoDB采用的是行级锁，删改数据的时候，MySQL会锁住记录。
行级锁分为共享锁（S锁）和排它锁（X锁）。
共享锁和排它锁，都不允许其他事务执行写操作，但是可以读数据。
MySQL默认会给添加、修改和删除记录设置排它锁。

## 删改数据避免锁表操作

减少并发操作的锁冲突
- 把复杂的SQL语句拆分成多条简单的SQL语句。


## 其他锁机制
### 乐观锁
乐观锁：总是假设最好的情况，每次去拿数据的时候都认为别人不会修改，所以不会上锁，只在更新的时候会判断一下在此期间别人有没有去更新这个数据。

### 悲观锁
悲观锁：总是假设最坏的情况，每次去拿数据的时候都认为别人会修改，所以每次在拿数据的时候都会上锁，这样别人想拿这个数据就会阻塞，直到它拿到锁。